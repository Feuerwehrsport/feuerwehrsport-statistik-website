.pull-right
  - if can?(:edit, resource_instance)
    = link_to("Mannschaft bearbeiten", { action: :edit }, class: "btn btn-default")
= breadcrum

%table.table.table-bordered
  %tr
    %th{ colspan: 3, class: "text-center"}
      %h2 Mannschaftsanmeldung
      %h4 - Teilnehmerliste A -
  %tr
    %td{ colspan: 2, class: "text-center col-md-5" }
      %h3= resource_instance.competition.name
    %td{ class: "text-center col-md-7" }
      = discipline_image(:hb, width: 85)
      = discipline_image(:fs, width: 85)
      = discipline_image(:hl, width: 85)
      = discipline_image(:la, width: 85)
  %tr
    %th{ colspan: 2, class: "text-center col-md-5" }
      %h4= l(resource_instance.competition.date, format: :german)
    %th{ class: "text-center col-md-7" }
      %h4= "in #{resource_instance.competition.place}"
  %tr
    %th{ class: "col-md-3" } Wertungsgruppe:
    %td{colspan: 2}= g(resource_instance.gender)
  %tr
    %th Mannschaftsleiter:
    %td{colspan: 2}= resource_instance.team_leader
  %tr
    %th Straße, Nr.:
    %td{colspan: 2}= resource_instance.street_with_house_number
  %tr
    %th PLZ, Ort:
    %td{colspan: 2}= resource_instance.postal_code
  %tr
    %th Telefon:
    %td{colspan: 2}= resource_instance.phone_number
  %tr
    %th E-Mail-Adresse:
    %td{colspan: 2}= resource_instance.email_address

  %tr
    %th{ colspan: 3, class: "text-center"}
      %h2 Namensliste
      %h4 - Teilnehmerliste B -
  %tr
    %td{ colspan: 2, class: "text-center col-md-5" }
      %h3= resource_instance.competition.name
    %td{ class: "text-center col-md-7" }
      = discipline_image(:hb, width: 85)
      = discipline_image(:fs, width: 85)
      = discipline_image(:hl, width: 85)
      = discipline_image(:la, width: 85)
  %tr
    %th{ colspan: 2, class: "text-center col-md-5" }
      %h4= l(resource_instance.competition.date, format: :german)
    %th{ class: "text-center col-md-7" }
      %h4= "in #{resource_instance.competition.place}"
  %tr
    %th Wertungen:
    %td{colspan: 2}
      = resource_instance.team_assessment_participations.map(&:competition_assessment).join(", ")

- if resource_instance.people.present?
  %h3 Wettkämpfer
  - i = 0
  = count_table(resource_instance.people) do |ct|
    - ct.col("Nr.") { i += 1 }
    - ct.col("Vorname", :first_name)
    - ct.col("Nachname", :last_name)
    - assessments = CompReg::CompetitionAssessment.requestable_for_person(resource_instance).decorate.each do |assessment|
      - ct.col(assessment) { |row| row.person_assessment_participations.find_by(competition_assessment: assessment).try(:single_competitor_order) }